{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["E:/Attackcapital/SignalHub/frontend/src/app/(authenticated)/admin/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { ResponsiveContainer, LineChart, Line, CartesianGrid, XAxis, YAxis, Tooltip, Legend, PieChart, Pie, Cell } from \"recharts\";\r\nimport Link from \"next/link\";\r\n\r\n/**\r\n * Admin Dashboard Page (app/admin/page.tsx)\r\n * - Live line chart: messages sent per user (multi-line)\r\n * - Pie chart: channel breakdown (SMS / WHATSAPP / EMAIL)\r\n * - Auto-refresh (polling) + optional WebSocket updates if NEXT_PUBLIC_ANALYTICS_WS set\r\n * - Professional, modern UI using Tailwind (fits with existing app)\r\n *\r\n * Expected backend endpoint:\r\n * GET /api/admin/analytics\r\n * Response shape (example):\r\n * {\r\n *   messagesPerUser: [\r\n *     { userId: 'u1', name: 'Alice', points: [{ ts: 1699992000000, count: 3 }, ...] },\r\n *     { userId: 'u2', name: 'Bob', points: [{ ts: 1699992000000, count: 1 }, ...] }\r\n *   ],\r\n *   channelDistribution: [ { channel: 'SMS', count: 150 }, { channel: 'WHATSAPP', count: 44 }, { channel: 'EMAIL', count: 32 } ]\r\n * }\r\n */\r\n\r\ntype Point = { ts: number; count: number };\r\ntype UserSeries = { userId: string; name: string; points: Point[] };\r\n\r\nexport default function AdminDashboard() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [userSeries, setUserSeries] = useState<UserSeries[]>([]);\r\n  const [channelDistribution, setChannelDistribution] = useState<{ channel: string; count: number }[]>([]);\r\n  const [live, setLive] = useState(true);\r\n  const [intervalSec, setIntervalSec] = useState<number>(5);\r\n  const wsRef = useRef<WebSocket | null>(null);\r\n\r\n  // derived chart data (rows by timestamp)\r\n  const chartData = useMemo(() => {\r\n    // gather unique timestamps\r\n    const tsSet = new Set<number>();\r\n    userSeries.forEach((u) => u.points.forEach((p) => tsSet.add(p.ts)));\r\n    const tsArray = Array.from(tsSet).sort((a, b) => a - b);\r\n    // produce rows: { tsLabel, [userId1]: count, [userId2]: count }\r\n    return tsArray.map((ts) => {\r\n      const row: any = { ts, tsLabel: new Date(ts).toLocaleTimeString() };\r\n      for (const u of userSeries) {\r\n        const p = u.points.find((x) => x.ts === ts);\r\n        row[u.userId] = p ? p.count : 0;\r\n      }\r\n      return row;\r\n    });\r\n  }, [userSeries]);\r\n\r\n  const users = useMemo(() => userSeries.map((u) => ({ id: u.userId, name: u.name })), [userSeries]);\r\n\r\n  const COLORS = [\"#4F46E5\", \"#06B6D4\", \"#F59E0B\", \"#EF4444\", \"#10B981\", \"#8B5CF6\", \"#F97316\", \"#0EA5E9\"];\r\n\r\n  async function fetchAnalytics() {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const res = await fetch(\"/api/admin/analytics\");\r\n      if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n      const j = await res.json();\r\n      // normalize\r\n      const msgs: UserSeries[] = Array.isArray(j.messagesPerUser)\r\n        ? j.messagesPerUser.map((u: any) => ({ userId: String(u.userId), name: u.name ?? (u.userId ?? \"Unknown\"), points: Array.isArray(u.points) ? u.points.map((p: any) => ({ ts: Number(p.ts), count: Number(p.count) })) : [] }))\r\n        : [];\r\n      const channels = Array.isArray(j.channelDistribution) ? j.channelDistribution.map((c: any) => ({ channel: c.channel, count: Number(c.count) })) : [];\r\n      setUserSeries(msgs);\r\n      setChannelDistribution(channels);\r\n    } catch (e: any) {\r\n      console.error(\"admin analytics fetch error\", e);\r\n      setError(String(e?.message ?? e));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  // initial load + polling\r\n  useEffect(() => {\r\n    fetchAnalytics();\r\n    let timer: number | undefined;\r\n    if (live) {\r\n      timer = window.setInterval(() => fetchAnalytics(), Math.max(1000, intervalSec * 1000));\r\n    }\r\n    return () => {\r\n      if (timer) window.clearInterval(timer);\r\n    };\r\n  }, [live, intervalSec]);\r\n\r\n  // optional WebSocket live updates (if backend provides NEXT_PUBLIC_ANALYTICS_WS)\r\n  useEffect(() => {\r\n    const wsUrl = (process.env.NEXT_PUBLIC_ANALYTICS_WS as string) || \"\";\r\n    if (!wsUrl) return;\r\n    try {\r\n      const ws = new WebSocket(wsUrl);\r\n      wsRef.current = ws;\r\n      ws.onopen = () => console.debug(\"analytics ws open\");\r\n      ws.onmessage = (ev) => {\r\n        try {\r\n          const msg = JSON.parse(ev.data);\r\n          // expected message type: { type: 'analytics:update' }\r\n          if (msg?.type === \"analytics:update\") {\r\n            fetchAnalytics();\r\n          }\r\n        } catch (e) {\r\n          console.warn(\"ws parse err\", e);\r\n        }\r\n      };\r\n      ws.onclose = () => console.debug(\"analytics ws closed\");\r\n    } catch (e) {\r\n      console.warn(\"analytics ws init failed\", e);\r\n    }\r\n    return () => {\r\n      try {\r\n        wsRef.current?.close();\r\n      } catch (e) {}\r\n      wsRef.current = null;\r\n    };\r\n  }, []);\r\n\r\n  function downloadCsv() {\r\n    // flatten chartData to CSV with header: tsLabel, user1, user2, ...\r\n    if (!chartData || chartData.length === 0) return;\r\n    const header = [\"timestamp\", ...users.map((u) => u.name)];\r\n    const rows = chartData.map((r) => [new Date(r.ts).toISOString(), ...users.map((u) => r[u.id] ?? 0)]);\r\n    const csv = [header.join(\",\"), ...rows.map((row) => row.join(\",\"))].join(\"\\n\");\r\n    const blob = new Blob([csv], { type: \"text/csv\" });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement(\"a\");\r\n    a.href = url;\r\n    a.download = `messages_per_user_${new Date().toISOString()}.csv`;\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n  }\r\n\r\n  return (\r\n    <main className=\"min-h-screen bg-slate-50 p-8\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div>\r\n            <h1 className=\"text-2xl font-extrabold text-slate-900\">Admin Dashboard</h1>\r\n            <p className=\"text-sm text-slate-600 mt-1\">Live analytics · Messages per user · Channel breakdown</p>\r\n          </div>\r\n          <div className=\"flex items-center gap-3\">\r\n            <Link href=\"/\" className=\"text-sm text-slate-600 hover:text-slate-800\">Back to app</Link>\r\n            <button onClick={() => fetchAnalytics()} className=\"px-3 py-1 rounded bg-white border shadow-sm text-sm\">Refresh</button>\r\n            <button onClick={() => setLive((s) => !s)} className={`px-3 py-1 rounded text-sm ${live ? \"bg-emerald-600 text-white\" : \"bg-white border\"}`}>\r\n              {live ? \"Live\" : \"Paused\"}\r\n            </button>\r\n            <button onClick={downloadCsv} className=\"px-3 py-1 rounded bg-indigo-600 text-white text-sm\">Export CSV</button>\r\n          </div>\r\n        </div>\r\n\r\n        {error && (\r\n          <div className=\"mb-4 p-3 bg-rose-50 border border-rose-100 text-rose-700 rounded\">Error loading analytics: {error}</div>\r\n        )}\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n          <section className=\"lg:col-span-2 bg-white rounded-2xl p-6 shadow border border-slate-100\">\r\n            <div className=\"flex items-start justify-between mb-4\">\r\n              <h2 className=\"text-lg font-semibold text-slate-800\">Messages per user (live)</h2>\r\n              <div className=\"text-sm text-slate-500\">Last updated: {loading ? \"…\" : new Date().toLocaleTimeString()}</div>\r\n            </div>\r\n\r\n            <div style={{ width: \"100%\", height: 360 }}>\r\n              <ResponsiveContainer>\r\n                <LineChart data={chartData} margin={{ top: 8, right: 24, left: 0, bottom: 6 }}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" />\r\n                  <XAxis dataKey=\"tsLabel\" minTickGap={20} />\r\n                  <YAxis allowDecimals={false} />\r\n                  <Tooltip />\r\n                  <Legend />\r\n                  {users.map((u, i) => (\r\n                    <Line key={u.id} type=\"monotone\" dataKey={u.id} name={u.name} stroke={COLORS[i % COLORS.length]} strokeWidth={2} dot={false} />\r\n                  ))}\r\n                </LineChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n\r\n            <div className=\"mt-4 text-xs text-slate-500\">Tip: Use the legend to toggle users on/off. If many users exist, consider filtering or selecting top N users.</div>\r\n          </section>\r\n\r\n          <aside className=\"bg-white rounded-2xl p-6 shadow border border-slate-100\">\r\n            <h3 className=\"text-lg font-semibold text-slate-800 mb-3\">Channel distribution</h3>\r\n\r\n            <div style={{ width: \"100%\", height: 260 }}>\r\n              <ResponsiveContainer>\r\n                <PieChart>\r\n                  <Pie data={channelDistribution} dataKey=\"count\" nameKey=\"channel\" cx=\"50%\" cy=\"50%\" outerRadius={80} label>\r\n                    {channelDistribution.map((c, i) => (\r\n                      <Cell key={c.channel} fill={COLORS[i % COLORS.length]} />\r\n                    ))}\r\n                  </Pie>\r\n                  <Tooltip />\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n\r\n            <div className=\"mt-4 space-y-2\">\r\n              {channelDistribution.map((c, i) => (\r\n                <div key={c.channel} className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div style={{ width: 12, height: 12, background: COLORS[i % COLORS.length], borderRadius: 3 }} />\r\n                    <div className=\"text-sm text-slate-700\">{c.channel}</div>\r\n                  </div>\r\n                  <div className=\"text-sm font-medium text-slate-800\">{c.count}</div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <div className=\"mt-4 text-xs text-slate-500\">Shows per-channel user activity over the selected timeframe.</div>\r\n          </aside>\r\n        </div>\r\n\r\n        <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          <div className=\"bg-white rounded-xl p-4 shadow border\"> \r\n            <div className=\"text-xs text-slate-500\">Active users</div>\r\n            <div className=\"mt-2 text-xl font-bold\">{users.length}</div>\r\n            <div className=\"text-xs text-slate-400 mt-1\">Users that sent messages during timeframe</div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-xl p-4 shadow border\"> \r\n            <div className=\"text-xs text-slate-500\">Total messages (all channels)</div>\r\n            <div className=\"mt-2 text-xl font-bold\">{channelDistribution.reduce((s, c) => s + c.count, 0)}</div>\r\n            <div className=\"text-xs text-slate-400 mt-1\">Combined across channels</div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-xl p-4 shadow border\"> \r\n            <div className=\"text-xs text-slate-500\">Refresh interval</div>\r\n            <div className=\"mt-2 flex items-center gap-2\">\r\n              <input type=\"number\" min={1} value={intervalSec} onChange={(e) => setIntervalSec(Number(e.target.value) || 5)} className=\"w-20 rounded border px-2 py-1\" />\r\n              <div className=\"text-xs text-slate-500\">seconds</div>\r\n            </div>\r\n            <div className=\"text-xs text-slate-400 mt-2\">Lower interval gives near-real-time data but increases load.</div>\r\n          </div>\r\n        </div>\r\n\r\n        <footer className=\"mt-8 text-xs text-slate-500\">Last synced at {new Date().toLocaleString()}</footer>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":["React","useEffect","useMemo","useRef","useState","ResponsiveContainer","LineChart","Line","CartesianGrid","XAxis","YAxis","Tooltip","Legend","PieChart","Pie","Cell","Link","Point","ts","count","UserSeries","userId","name","points","AdminDashboard","loading","setLoading","error","setError","userSeries","setUserSeries","channelDistribution","setChannelDistribution","channel","live","setLive","intervalSec","setIntervalSec","wsRef","WebSocket","chartData","tsSet","Set","forEach","u","p","add","tsArray","Array","from","sort","a","b","map","row","tsLabel","Date","toLocaleTimeString","find","x","users","id","COLORS","fetchAnalytics","res","fetch","ok","Error","status","j","json","msgs","isArray","messagesPerUser","String","Number","channels","c","e","console","message","timer","window","setInterval","Math","max","clearInterval","wsUrl","process","env","NEXT_PUBLIC_ANALYTICS_WS","ws","current","onopen","debug","onmessage","ev","msg","JSON","parse","data","type","warn","onclose","close","downloadCsv","length","header","rows","r","toISOString","csv","join","blob","Blob","url","URL","createObjectURL","document","createElement","href","download","click","revokeObjectURL","s","width","height","top","right","left","bottom","i","background","borderRadius","reduce","target","value","toLocaleString"],"mappings":"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","ignoreList":[],"debugId":null}}]
}